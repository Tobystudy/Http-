# 1장. HTTP 개관
이 장에서 이야기하고자 하는것
- 클라이언트가 얼마나 서버와 통신하는지
- 리소스는 어디에서 오는지
- 웹 트랜젝션의 동작 방식
- HTTP 통신을 위해 사용되는 메시지 형식
- HTTP 기저의 TCP 네트워크 전송
- 여러 종류의 HTTP 프로토콜
- 인터넷에 설치된 다양한 HTTP 구성요소
## 1.1 HTTP: 인터넷의 멀티 배달부
## 1.2 웹 클라이언트와 서버
## 1.3 리소스
모든것이 리소스이다.<br>
간단하게는 정적 파일인 이미지, 텍스트, html등 이뿐만 아니라 컨텐츠를 생산하는 프로그램, 게이트웨이와 같이 엑세스할 수 있는 모든 호스트들도 리소스라고 할 수 있다.
### 1.3.1 미디어 타입
HTTP에서는 웹에서 전송되는 모든 객체에 MIME타입이라는 라벨을 붙인다.<br>
이는 전자메일에서 비롯된 것으로 "/"을 기준으로 주 타입과 부 부타입으로 이루어진 문자열이다.<br>
자주보던 헤더의 Content-Type application/json가 미디어 타입이다.
### 1.3.2 URI
웹의 모든 리소스는 식별할 수 있어야한다.<br>
통합 자원 식별자(uniform resource identifier)의 약자이며 URL과 URN 두 가지가 있다.
### 1.3.3 URL
통합 자원 지시자(uniform resource locator)의 약자이고 아주 흔한 형태 어떠한 리소스에 대해서 어디에 어떻게 접근하는지 방식을 표현해준다.<br>
URL은 세 부분으로 이루어진 포멧을 따른다.<br>
https://www.google.com/search?q=... <br>
1. scheme : https://
2. host : www.google.com 리소스를 보유중인 서버, 필요하다면 포트번호를 기입
3. path : /search 서버 내에 리소스가 존재하는 위치, 필요하다면 쿼리 문자열을 기입(?q=.....)
### 1.3.4 URN
URN은 리소스의 접근방법, 위치를 제외한 이름만을 기입한다.
여러 네트워크 프로토콜로 접근하더라도 그 이름이 유일무이하기때문에 문제가 없다.<br>
URN의 예로는 ISBN가 있다.<br>
URN을 이용하기위해 리소스의 위치를 분석하기위한 인프라가 부족하기에 아직은 실용적이지 못하다.
## 1.4 트랜잭션
트랜잭션 = 요청 메시지 + 응답 메시지
### 1.4.1 메서드
모든 HTTP 요청 메시지는 한 개의 메서드를 갖고 서버에 어떤 동작을 요구한다.<br>
일반적으로 사용되는 5가지 HTTP메서드는 다음과 같다.
1. GET
2. PUT
3. DELETE
4. POST
5. HEAD
### 1.4.2 상태 코드
모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.<br>
응답 메시지 = 응답코드 + 사유구절
- 200번대 성공
- 300번대 리디렉션
- 400번대 클라이언트 오류
- 500번대 서버 오류
### 1.4.3 웹 페이지는 여러 객체로 이루어질 수 있다.
하나의 어플리케이션은 여러 HTTP 트랜잭션을 수행한다.<br>
우선 빼대를 이룰 html을 트랜잭션으로 가져온 뒤 안에 표시될 리소스를 또 다시 HTTP트랜잭션을 수행해 가져온다.
## 1.5 메시지
HTTP는 이진 형식이 아닌 일반 텍스트이다.<br>
클라이언트 -> 서버 : 요청 메시지<br>
서버 -> 클라이언트 : 응답 메시지<br>

HTTP 메시지의 구조
||요청|응답|
|--------|------|------|
|시작줄|무엇을 해야할지|무슨 일이 일어났는지|
|헤더|0개 이상의 필드가 추가된다|
|본문|웹 서버로 보낼 데이터|반환된 데이터|
### 1.5.1 간단한 메시지의 예
## 1.6 TCP커넥션
### 1.6.1 TCP/IP
HTTP는 TCP/IP를 이용해 작동한다.<br>
TCP는 1. 오류 없는 데이터 전송. 2. 순서에 맞는 전달. 3. 조각나지 않는 데이터 스트림 을 제공한다.
### 1.6.2 접속, 그리고 포트번호
HTTP클라이언트는 다음과 같은 과정을 거쳐 HTML 리소스를 가져와 사용자에게 보여준다.
1. 웹 브라우저는 서버의 URL로부터 호스트명을 추출한다.
2. 웹 브라우저는 호스트명을 IP로 변환한다 (이 때 DNS사용)
3. 웹 브라우저는 URL로부터 포트번호를 추출한다.
4. 웹 브라우저는 웹 서버와 TCP 커넥션을 맺는다.(3WH)
5. 웹 브라우저는 서버에 HTTP 요청을 보낸다.
6. 서버는 웹 브라우저에 HTTP 응답을 돌려준다.
7. 커넥션이 닫히면(4WH), 웹브라우저는 문서를 보여준다.
### 1.6.3 텔넷을 이용한 실제 예제
## 1.7 프로토콜 버전
- HTTP 0.9 : 단일 메서드인 GET만 지원하고, 헤더나 상태 코드 MIME타입이 존재하지않음
- HTTP 1.0 : 널리쓰이기 시작한 버전으로 헤더, 추가 메서드, 멀티미디어 객체 처리, 상태코드를 추가하였다.
- HTTP 1.0+ : keep-alive커넥션, 가상 호스팅, 프락시 등의 기능이 추가되었다.
- HTTP 1.1 : 기존 설계의 구조적 결함 교정, 최적화, 잘못된기능의 제거에 집중하였다.
- HTTP 2.0 : 1.1버전의 성능문제를 개선하기위해 SPDY프로토콜을 기반으로 설계된 버전이며 이진 프레임, 헤더압축, 다중 스트림을 이용한 효율적인 데이터 전송을 가능하게 했다.
## 1.8 웹의 구성요소
### 1.8.1 프락시
클라이언트와 서버 간의 중계 역할을 하는 서버.<br>
보안, 캐싱, 필터링 등 다양한 기능을 수행한다.<br>
### 1.8.2 캐시
### 1.8.3 게이트웨이
게이트웨이는 서로 다른 프로토콜을 사용하는 두 개 이상의 시스템 간의 통신을 가능케 하는 역할을한다고 한다.
### 1.8.4 터널
raw데이터를 열어보지않고 그대로 전달하는 HTTP 어플리케이션 비 HTTP데이터를 HTTP통해 전송할 때 주로 사용
### 1.8.5 에이전트
웹 브라우저나 웹 로봇과 같이 사용자나 프로세스를 대표하여 웹 서버에 요청을 보내거나 응답을 받는 프로그램이나 프로세스
## 1.9 시작의 끝
## 1.10 추가정보
### 1.10.1 HTTP 프로토콜에 대한 정보
### 1.10.2 역사적 시각
### 1.10.3 기타 월드 와이드 웹 정보