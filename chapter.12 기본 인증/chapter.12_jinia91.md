# 인증
- 어떤 실체가 정말 그 실체가 맞는지 확인하는 과정
- 실체 : 메시지, 사용자, 출처, 장치 등

# HTTP 기본 인증 프레임워크
- http 헤더 Basic-Authentication 을 사용하는 것!
- 스프링 시큐리티로 기본적인 인증기능을 사용하면 위의 방식을 쓴다
- 이름 / 비밀번호 방식

<img width="1080" alt="image" src="https://github.com/Tobystudy/Http-Study/assets/85499582/d6f93a27-43df-4996-8bbe-a26009743b76">

|단계|헤더|설명|메서드 / 상태|
|-|-|-|-|
|요청||최초 요청에는 인증정보가 없다|GET|
|인증요구|WWW-Authenticate|서버는 사용자에게 사용자 이름과 비밀번호를 제공ㅇ하라는 지시의 의미로 401 상태 정보와 함께 요청을 반렿나다. |401|
|인증|Authorization|클라이언트는 요청을 다시 보내는데 이번에는 인증 알고리즘과 사용자 이름과 비밀번호를기술한 Authorization 헤더를 함께 보낸다|GET|
|성공|Authentication-Info|인증 정보가 정확하면, 서버는 문서와 함께 응답한다.|200|

## 보안 영역
- WWW-Authenticate에 realm으로 권한그룹 등급등을 코멘트할 수 있다

## Base-64 인코딩
- 기본 인증시엔 사용자이름과 비밀번호를 콜론으로 이어서 합치고 base-64 인코딩을 사용한다.
- eg) Id:Pwd -> YndJpdfjaweofvfjwafo
 
## 기본인증의 보안결함
### base64 인코딩의 취약성
- 암호화가 아니라 인코딩에 불가하므로 너무나  쉽게 디코딩될 수 있다. 스내핑된순간 유출되는 셈이므로 요청자체를 SSL로 암호화하던지, 암호를 암호화하던지 보안을 강화해야한다

### 암호화되더라도 사용 자체는 가능
암호화한 요청을 스내핑해 그대로 재사용하면 사용가능하므로 이에대안 대책도 필요하다

### 비밀번호 자체의 취약성
- 재사용되고 다른사이트와 공유되는 비밀번호 자체의 위험성이 존재

### 인증헤더 이외 부분 변조위험
- 역시나 SSL등으로 요청 그자체에 대한 보안이 필요

## 최근 추세
- 인증 자체의 보안위험성과 개인정보 취급에대한 유지관리 부담 등으로 최근 추세는 최소 인증, 식별 토큰 전략을 주로 사용하며, 이때에 최소 인증조차 책임을 분리하여 외부 인증서버에 맡기는 OAuth2 등이 대세
- 식별 토큰자체는 JWT나 조금더 확장한 Passport 방식을 사용하는 편
- 토큰의 취급 기술 자체는 여전히 쿠키, 헤더 + @ 로컬스토리지정도라 기본적인 원리자체는 동일하다. 단지 보안과 사용용이성등을 이유로 포멧, 프로토콜등이 고도화되었을뿐
